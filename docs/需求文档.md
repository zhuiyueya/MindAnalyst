# Mind-Analyst 需求文档（PRD）

## 1. 基本信息
- **产品名称**：Mind-Analyst（个人工具）
- **文档版本**：v0.1
- **目标用户**：单人自用（个人研究/学习/情报整理）
- **支持平台（阶段性）**：
  - **MVP**：B 站 UP 主（视频）
  - **后续**：微信公众号（文章）、更多平台/网站（文章/视频）

## 2. 背景与动机
你希望对某位创作者（UP 主/博主）的所有内容进行自动化收集、转写/抽取、摘要与跨内容汇总，最终形成：
- **单内容**（视频/文章）可追溯的结构化摘要
- **作者级**“核心思想/观点体系/主题地图/观点演化”报告
- **可问答检索**的 AI 对话界面，回答必须附带来源引用（视频时间戳/文章段落定位）

## 3. 产品目标（Goals）
- **G1：低成本理解作者**
  - 快速理解作者在某领域的主要观点与论证结构。
- **G2：可追溯、可验证**
  - 所有总结与问答输出尽量提供引用证据（BV + 时间戳 / 文章链接 + 段落）。
- **G3：面向规模的稳定运行**
  - 支持作者内容达到“数千条”，具备增量更新、断点续跑、失败重试、可观测。
- **G4：可扩展到多平台**
  - 通过“平台适配器”接入微信公众号/网站文章等，不推倒重来。

## 4. 非目标（Non-Goals）
- **不做内容再分发/搬运**：不提供对外发布/二次传播的功能定位。
- **不做“仿 UP 主”人格化替代**：避免以“模仿创作者口吻/写作风格”作为目标（可作为可选研究方向，但默认不纳入 MVP）。
- **不追求一次性全量 ASR**：对几千视频作者，MVP 不要求全部音频转写完成才可用（优先渐进构建/按需转写）。

## 5. 用户使用流程（核心路径）
### 5.1 导入与构建（Build）
1) 用户进入 Web UI，选择平台（B 站 / 公众号等）。
2) 输入作者信息：
   - **B 站**：优先输入作者主页 URL（兜底支持作者名搜索）。
3) 点击“开始导入/更新”。
4) 系统后台执行：
   - 拉取作者内容列表与元数据
   - 获取字幕（优先）/ASR 转写（兜底）
   - 分段（带时间戳）
   - 生成单内容结构化摘要
   - 入库（结构化库 + 检索库/向量库）
   - 生成作者级汇总报告（可增量更新）
5) UI 展示导入进度、错误与重试。

### 5.2 在线问答（Serve）
1) 用户在 AI 对话界面提问（默认限定在某作者）。
2) 系统进行检索与重排，拼装证据上下文。
3) 生成回答并展示引用：
   - **视频**：BV + 时间戳（可点击跳转）
   - **文章**：链接 + 段落/片段定位

### 5.3 报告浏览
- 用户可查看：
  - 单内容摘要页
  - 作者“核心思想”报告页（主题地图/要点/时间线/证据引用）

## 6. 功能需求（Functional Requirements）
### 6.1 作者与平台管理
- **FR-1 平台选择**：支持平台下拉框。
- **FR-2 作者导入**：支持作者主页 URL（优先）+ 作者名（兜底）。
- **FR-3 多作者管理**：支持保存多个作者条目，切换作者空间。
- **FR-4 更新策略**：支持“全量重建 / 增量更新 / 仅更新元信息”。

### 6.2 采集与处理（后台任务）
- **FR-5 内容列表采集**：获取作者的全部内容列表与元信息（分页/分P/合集/置顶等）。
- **FR-6 字幕获取**：优先抓取官方字幕/CC；无字幕时进入 ASR 队列。
- **FR-7 ASR 转写**：支持对音频转写，输出带时间戳文本。
- **FR-8 分段**：将转写/文章切分为可检索片段，片段必须包含来源定位信息（时间戳/段落）。
- **FR-9 幂等与去重**：重复执行不会产生重复内容；支持断点续跑。

### 6.3 摘要与汇总
- **FR-10 单内容结构化摘要**：对每个视频/文章生成固定结构的摘要（建议 JSON 字段：一句话主旨、要点、论证结构、术语、证据引用等）。
- **FR-11 精简摘要**：面向快速浏览的短摘要（50-200 字/或 5 bullet）。
- **FR-12 作者级汇总报告**：对作者所有内容进行主题聚类与“核心思想”归纳，包含：
  - 核心命题（1-3 条）
  - 支撑论点与证据
  - 主题簇（分类）
  - 观点演化时间线（可选）
  - 争议/冲突观点呈现（可选）

### 6.4 知识库与检索
- **FR-13 知识库存储**：存储原始文本段、结构化摘要、元数据。
- **FR-14 检索能力**：支持语义检索 + 关键词检索（混合检索）。
- **FR-15 引用与回跳**：
  - 视频回答必须返回可点击时间戳（跳到对应时间点）。
  - 文章回答返回链接并定位段落/片段。

### 6.5 AI 问答界面
- **FR-16 Chat UI**：对话输入框 + 作者选择框 + 平台选择框。
- **FR-17 引用展示**：答案下方展示引用列表（可展开原文片段）。
- **FR-18 失败降级**：检索不足时明确提示“证据不足/建议改写问题”，必要时反问澄清。

### 6.6 运维与可观测（个人工具版）
- **FR-19 任务状态**：展示队列长度、处理进度、失败原因。
- **FR-20 日志**：可查看单条内容的处理流水线日志。
- **FR-21 预算控制**：可设置每日/每作者处理上限（转写时长、LLM 调用次数）。

## 7. 非功能需求（Non-Functional Requirements）
- **NFR-1 性能与规模**：支持作者内容达到“几千条”，导入/更新可持续运行。
- **NFR-2 可靠性**：任务失败可重试；支持断点续跑；不因单条失败阻塞整体。
- **NFR-3 可追溯性**：回答与报告尽量提供证据引用与定位。
- **NFR-4 可扩展性**：新增平台时仅新增适配器，不改动核心摘要/检索/问答链路。
- **NFR-5 隐私与本地优先**：个人工具默认本地存储；允许可选部署到个人服务器。
- **NFR-6 成本可控**：支持渐进构建（Lazy ASR/按需摘要），避免一次性全量高成本。

## 8. 约束与风险
- **版权/合规风险**：不同平台对抓取与内容使用限制不同；个人工具也需尊重平台规则与作者权益。
- **平台接口变化**：采集方式可能随平台变更而失效，需要维护。
- **成本风险**：ASR + LLM 摘要对长视频/大量内容成本高；需要预算控制与分级策略。
- **质量风险**：ASR 错误会传递到摘要与问答，需要自检与引用校验。

## 9. 里程碑（建议）
- **M0（1-2 周）**：B 站单作者导入（少量视频）+ 转写/分段入库 + 基础检索 + 引用回跳 demo
- **M1（2-4 周）**：结构化摘要 + 作者报告 + 在线问答（混合检索+重排）+ 断点续跑
- **M2（4-8 周）**：渐进构建、冲突观点呈现、评测集与回归指标
- **M3（后续）**：微信公众号/网页文章适配器、多作者管理增强、模型与成本优化

## 10. 验收标准（MVP）
- 能导入 1 位 B 站作者（≥100 条内容亦可逐步处理），任务可断点续跑。
- 任意提问返回答案时，至少给出 3 条可点击引用（BV + 时间戳），点击可跳转验证。
- 单视频摘要与作者汇总报告可生成并可复现（同输入多次运行结果结构稳定）。
